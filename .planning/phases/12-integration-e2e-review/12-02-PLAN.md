---
phase: 12-integration-e2e-review
plan: 02
type: execute
wave: 2
depends_on:
  - 12-01
files_modified:
  - .planning/phases/12-integration-e2e-review/12-02-reconciled-findings.md
  - .planning/phases/12-integration-e2e-review/12-02-integration-review-verdict.md
autonomous: true
requirements:
  - INTG-01
  - INTG-02
  - INTG-03
  - INTG-04
  - INTG-05

must_haves:
  truths:
    - "Every disagreement between the three council agents has been resolved with documented reasoning"
    - "A unified issue list exists with final severity and remediation path for each issue"
    - "Issues from all three agents are merged, deduplicated, and prioritized"
    - "Security findings are resolved with a clear protected/unprotected surface assessment"
    - "A clear deploy-blocking vs. deferrable classification exists for every issue"
  artifacts:
    - path: ".planning/phases/12-integration-e2e-review/12-02-reconciled-findings.md"
      provides: "Merged and deduplicated issue list with final dispositions"
    - path: ".planning/phases/12-integration-e2e-review/12-02-integration-review-verdict.md"
      provides: "Phase verdict -- pass/fail with requirement-level status for each INTG requirement, plus unified cross-phase remediation backlog for Phase 13"
  key_links:
    - from: "12-01-correctness-findings.md"
      to: "12-02-reconciled-findings.md"
      via: "Issues merged with dedup"
      pattern: "correctness"
    - from: "12-01-implementability-findings.md"
      to: "12-02-reconciled-findings.md"
      via: "Issues merged with dedup"
      pattern: "implementability"
    - from: "12-01-gaps-findings.md"
      to: "12-02-reconciled-findings.md"
      via: "Issues merged with dedup"
      pattern: "gaps"
    - from: "10-02-platform-review-verdict.md"
      to: "12-02-integration-review-verdict.md"
      via: "Phase 10 BLOCK issues merged into unified remediation backlog"
      pattern: "PLAT"
    - from: "11-02-frontend-review-verdict.md"
      to: "12-02-integration-review-verdict.md"
      via: "Phase 11 BLOCK issues merged into unified remediation backlog"
      pattern: "PCF"
---

<objective>
Reconcile the three independent AI Council findings into a single unified assessment of integration and end-to-end correctness. Resolve disagreements between agents, deduplicate overlapping issues, assign final severity, and produce a phase verdict. Then merge with Phase 10 and Phase 11 findings to produce the COMPLETE remediation backlog for Phase 13.

Purpose: This is the final review phase before remediation. The reconciled output must give Phase 13 a single, definitive, prioritized list of every deploy-blocking issue across ALL three review phases (10, 11, 12) so remediation can execute efficiently.

Output: Two documents -- (1) a reconciled findings list with final dispositions for Phase 12 issues, and (2) an integration review verdict with pass/fail per INTG requirement PLUS a unified cross-phase remediation backlog covering all BLOCK issues from Phases 10, 11, and 12.
</objective>

<execution_context>
@/Users/admin/.claude/get-shit-done/workflows/execute-plan.md
@/Users/admin/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

Input from Plan 12-01 (must read all three):
@.planning/phases/12-integration-e2e-review/12-01-correctness-findings.md
@.planning/phases/12-integration-e2e-review/12-01-implementability-findings.md
@.planning/phases/12-integration-e2e-review/12-01-gaps-findings.md
@.planning/phases/12-integration-e2e-review/12-01-SUMMARY.md

Prior phase verdicts (for cross-phase remediation backlog):
@.planning/phases/10-platform-architecture-review/10-02-platform-review-verdict.md
@.planning/phases/10-platform-architecture-review/10-02-reconciled-findings.md
@.planning/phases/11-frontend-pcf-review/11-02-frontend-review-verdict.md
@.planning/phases/11-frontend-pcf-review/11-02-reconciled-findings.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Merge, deduplicate, and reconcile findings from all three agents</name>
  <files>.planning/phases/12-integration-e2e-review/12-02-reconciled-findings.md</files>
  <action>
Read all three findings documents from Plan 12-01. Produce a single reconciled findings document.

**Step 1: Extract and catalog all issues**

Build a master list of every issue from all three reports. For each issue, record:
- Source agent(s) (Correctness, Implementability, Gaps -- or multiple if flagged by more than one)
- Layers affected (prompt, schema, Dataverse, flow, frontend -- or multiple for cross-layer issues)
- Issue description
- Severity from each agent that flagged it

**Step 2: Deduplicate**

Identify issues that are the same underlying problem flagged by multiple agents. Cross-layer issues are especially likely to be flagged by multiple agents from different angles. Merge these into single entries, noting which agents flagged them and preserving the most detailed description.

Pay special attention to dedup across these common overlap areas:
- Field mismatch found by Correctness AND Implementability (same root cause: contract inconsistency vs. workflow broken)
- Security issues found by Gaps AND Implementability (same root cause: missing handling vs. user-visible failure)
- Existing Phase 10/11 BLOCK issues that also appear as integration issues -- note the cross-reference but do NOT re-count them

**Step 3: Resolve disagreements**

For each case where agents disagree on severity or whether something is an issue at all:
1. State the disagreement clearly (e.g., "Correctness says deploy-blocking, Gaps says non-blocking")
2. Research the specific cross-layer behavior using the source files -- re-read the relevant artifacts from BOTH layers and trace the data flow
3. Make a final ruling with documented reasoning
4. If genuinely ambiguous, classify as deploy-blocking (err on the side of caution)

**Step 4: Classify issues that overlap with Phase 10/11 findings**

Some Phase 12 integration issues may be the same root cause as Phase 10 or 11 BLOCK issues. For each:
- If it is truly the same issue seen from an integration angle: mark as "CROSS-REF: {Phase-XX issue ID}" and do not count as a new BLOCK
- If it is a NEW integration-specific issue that is related to but distinct from a Phase 10/11 issue: count as a new issue and note the relationship
- If fixing the Phase 10/11 issue would automatically fix this integration issue: note "RESOLVES WITH: {Phase-XX issue ID}"

**Step 5: Assign final categories**

Classify every reconciled issue into exactly one category:
- **BLOCK**: Deploy-blocking -- must be fixed in Phase 13 before deployment
- **WARN**: Non-blocking -- should be fixed but deployment can proceed
- **INFO**: Informational -- documented constraint or known limitation, no fix needed
- **FALSE**: False positive -- agent was wrong, issue does not actually exist (document why)

**Step 6: Map issues to INTG requirements**

Tag each issue with the INTG requirement(s) it affects:
- INTG-01: Cross-layer contract consistency (field names, types, nullability)
- INTG-02: User workflow completeness (every workflow traced end-to-end)
- INTG-03: Error handling at layer boundaries (fallback behavior at every seam)
- INTG-04: Security model completeness (auth, row-level access, XSS, prompt injection)
- INTG-05: Async flow correctness (no race conditions, resource leaks, or timing assumptions)

Write the reconciled findings document with this structure:
```
# Reconciled Integration/E2E Findings

## Summary
[Total unique issues: X (Y BLOCK, Z WARN, W INFO, V FALSE)]
[Of these, N are NEW integration issues, M are cross-references to Phase 10/11 issues]
[Agents agreed on N issues, disagreed on M issues]

## Reconciliation Methodology
[How disagreements were resolved, how cross-phase overlap was handled]

## Cross-Phase Issue Map
[Table showing which Phase 12 issues relate to Phase 10/11 issues]
| Phase 12 Issue | Related Phase 10/11 Issue | Relationship | Notes |

## BLOCK -- Deploy-Blocking Issues
For each:
| ID | Requirement | Layers Affected | Issue | Flagged By | Remediation |
[Detailed description, evidence from multiple layers, specific remediation steps]

## WARN -- Non-Blocking Issues
[Same format]

## INFO -- Known Constraints
[Same format, but with "accepted risk" rationale instead of remediation]

## FALSE -- False Positives
[Issue description, which agent flagged it, why it is not actually an issue]

## Disagreement Log
| Issue | Agent A Said | Agent B Said | Resolution | Reasoning |
```
  </action>
  <verify>
    <automated>test -f .planning/phases/12-integration-e2e-review/12-02-reconciled-findings.md && grep -c "BLOCK\|WARN\|INFO\|FALSE" .planning/phases/12-integration-e2e-review/12-02-reconciled-findings.md</automated>
  </verify>
  <done>Reconciled findings document exists with deduplicated issues, resolved disagreements, cross-phase issue mapping, final severity classifications (BLOCK/WARN/INFO/FALSE), and INTG requirement mappings</done>
</task>

<task type="auto">
  <name>Task 2: Produce integration review verdict with unified cross-phase remediation backlog for Phase 13</name>
  <files>.planning/phases/12-integration-e2e-review/12-02-integration-review-verdict.md</files>
  <action>
Read the reconciled findings document from Task 1 AND both prior phase verdicts (Phase 10 and Phase 11). Produce the final integration review verdict AND the unified remediation backlog.

**Step 1: Evaluate each INTG requirement**

For each requirement, determine pass/fail based on the reconciled findings:

- **INTG-01** (Cross-layer contracts): PASS if no BLOCK issues affect field consistency across layers. CONDITIONAL PASS if only WARN issues exist. FAIL if any BLOCK issues mean data is lost, corrupted, or misinterpreted between layers.
- **INTG-02** (Workflow completeness): PASS if all 7 user workflows complete end-to-end with no missing steps. CONDITIONAL PASS if minor gaps exist that do not prevent core functionality. FAIL if any workflow has a missing step that prevents completion.
- **INTG-03** (Error handling): PASS if error handling exists at every layer boundary with defined fallback behavior. CONDITIONAL PASS if some boundaries have partial handling. FAIL if any boundary has no error handling and failures would be silent or crash-inducing.
- **INTG-04** (Security model): PASS if all 4 security domains (auth, row-level access, XSS, prompt injection) are addressed with no unprotected surfaces. CONDITIONAL PASS if minor gaps exist with low risk. FAIL if any domain has an unprotected surface that could lead to data exposure or injection.
- **INTG-05** (Async flow correctness): PASS if no race conditions, resource leaks, or timing assumptions exist. CONDITIONAL PASS if timing assumptions exist but are unlikely to cause failures in practice. FAIL if any async flow has a demonstrated race condition or resource leak.

**Step 2: Compute phase verdict**

- **PASS**: All 5 requirements PASS
- **CONDITIONAL PASS**: All requirements PASS or CONDITIONAL PASS (WARN issues exist but no BLOCK issues)
- **FAIL**: Any requirement FAIL (BLOCK issues exist that must be remediated in Phase 13)

**Step 3: Build the UNIFIED cross-phase remediation backlog for Phase 13**

This is the CRITICAL deliverable. Merge ALL BLOCK issues from ALL three review phases into a single prioritized backlog:

**From Phase 10 (9 BLOCK issues):**
- Read the Phase 10 verdict's remediation backlog
- Include each BLOCK issue with its original ID (R-01 through R-09)
- Note which ones have integration implications discovered in Phase 12

**From Phase 11 (8 BLOCK issues):**
- Read the Phase 11 verdict's remediation backlog
- Include each BLOCK issue with its original ID (F-01 through F-08)
- Note which ones have integration implications discovered in Phase 12

**From Phase 12 (NEW BLOCK issues):**
- Include each new BLOCK issue with its ID (I-XX)
- Note cross-references to related Phase 10/11 issues

**Step 4: Determine execution order for Phase 13**

Analyze dependencies between BLOCK issues across all three phases. Determine the optimal execution order:

1. **Wave 1 (Schema/contract fixes):** Issues that change data contracts must be fixed first because downstream fixes depend on them
   - Example: N/A vs null mismatch (R-01) must be fixed before frontend data flow fixes
2. **Wave 2 (Flow specifications):** Missing flow specs must be written before they can be tested against the fixed contracts
   - Example: Missing Daily Briefing flow spec (R-05) blocks E2E workflow verification
3. **Wave 3 (Frontend fixes):** Component fixes that depend on contract and flow changes
   - Example: NUDGE status fix (F-01) depends on understanding the correct Dataverse column
4. **Wave 4 (Test coverage + validation):** Tests and validation that verify all fixes
   - Example: ConfidenceCalibration tests (F-05) should be written after any formula fixes

Map every BLOCK issue to a wave with dependency justification.

**Step 5: Generate deferral candidates**

For ALL WARN issues across all three phases:
- Issue ID and phase
- Why it is non-blocking
- Recommended timeline (fix in Phase 13 if time permits, or defer to post-deployment)

Write the verdict document with this structure:
```
# Integration/E2E Review -- Verdict

## Overall Verdict: [PASS | CONDITIONAL PASS | FAIL]

## Requirement Status

| Requirement | Status | BLOCK | WARN | INFO | Details |
|-------------|--------|-------|------|------|---------|
| INTG-01 | [PASS/COND/FAIL] | N | N | N | [one-line summary] |
| INTG-02 | ... | ... | ... | ... | ... |
| INTG-03 | ... | ... | ... | ... | ... |
| INTG-04 | ... | ... | ... | ... | ... |
| INTG-05 | ... | ... | ... | ... | ... |

### Detailed Requirement Assessment
[For each INTG requirement: full assessment with evidence]

---

## UNIFIED Remediation Backlog for Phase 13

### Summary
| Phase | BLOCK Issues | Already Known | New from Phase 12 |
|-------|-------------|---------------|--------------------|
| 10 | 9 | 9 | [N with integration implications] |
| 11 | 8 | 8 | [N with integration implications] |
| 12 | [X] | 0 | [X] |
| **Total** | **[Y]** | **17** | **[Z new]** |

### Wave 1: Schema/Contract Fixes
| # | Issue ID | Phase | Artifact | Fix Description | Complexity | Blocked By |
[Issues that must be fixed first]

### Wave 2: Flow Specifications
| # | Issue ID | Phase | Artifact | Fix Description | Complexity | Blocked By |
[Missing flow specs and flow fixes]

### Wave 3: Frontend Fixes
| # | Issue ID | Phase | Artifact | Fix Description | Complexity | Blocked By |
[Component and hook fixes]

### Wave 4: Test Coverage + Validation
| # | Issue ID | Phase | Artifact | Fix Description | Complexity | Blocked By |
[Tests and final validation]

### Deferral Candidates (All Phases)
| # | Issue ID | Phase | Artifact | Issue | Recommended Action |
[WARN issues from all three phases]

## Key Insights
[5-7 most important findings across all three review phases -- the integration perspective that single-layer reviews missed]

## Comparison: Agent Agreement
[How much did the three agents agree? What topics generated the most disagreement? How does inter-agent agreement in Phase 12 compare to Phases 10 and 11?]
```
  </action>
  <verify>
    <automated>test -f .planning/phases/12-integration-e2e-review/12-02-integration-review-verdict.md && grep -c "INTG-01\|INTG-02\|INTG-03\|INTG-04\|INTG-05" .planning/phases/12-integration-e2e-review/12-02-integration-review-verdict.md</automated>
  </verify>
  <done>Integration review verdict document exists with pass/fail status for each INTG requirement, unified cross-phase remediation backlog (all BLOCK issues from Phases 10+11+12 in dependency-ordered waves), deferral candidates, and key insights from the integration perspective</done>
</task>

</tasks>

<verification>
After both tasks complete:
1. Reconciled findings document has merged and deduplicated all issues from the three agent reports
2. Every disagreement between agents is logged with resolution reasoning
3. Every issue has exactly one final classification (BLOCK/WARN/INFO/FALSE)
4. Cross-phase issue mapping correctly identifies overlap with Phase 10 and 11 issues
5. Verdict document covers all 5 INTG requirements with explicit pass/fail
6. UNIFIED remediation backlog includes ALL BLOCK issues from Phases 10, 11, AND 12
7. Remediation backlog is organized into dependency-ordered waves for Phase 13
8. Deferral candidates cover WARN issues from ALL three phases
9. No INTG requirement is left unassessed
</verification>

<success_criteria>
- All issues from all three agent reports are accounted for (none dropped)
- Disagreements are resolved with reasoning, not just overridden
- Cross-phase issue overlap is correctly identified (not double-counted)
- Final verdict uses the defined PASS/CONDITIONAL/FAIL criteria consistently
- UNIFIED remediation backlog is the single source of truth for Phase 13 -- it includes every BLOCK issue from every review phase
- Wave ordering in the remediation backlog reflects actual dependencies (not arbitrary ordering)
- Key insights highlight integration-specific findings that single-layer reviews could not have found
</success_criteria>

<output>
After completion, create `.planning/phases/12-integration-e2e-review/12-02-SUMMARY.md`
</output>
